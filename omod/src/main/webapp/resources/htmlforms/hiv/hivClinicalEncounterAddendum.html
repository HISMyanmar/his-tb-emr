<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
-->
<htmlform>
<style type="text/css">
td {
	padding: 5px;
}

input[type=text] {
	width: 300px;
}
</style>

<script type="text/javascript">
		jq(document).ready(function(){
			
			if (getValue('artSideEffectPresent.value') == 1065) {
				jq('#artSideEffectList :input').prop('disabled', false);
			}
			else {
				jq('#artSideEffectList :input').prop('disabled', true);
				}
		
			jq("#artSideEffectPresent input:radio").change(function() {
				if (getValue('artSideEffectPresent.value') == 1065) {
					jq('#artSideEffectList :input').prop('disabled', false);
				}
				else {
					jq('#artSideEffectList :input').prop('disabled', true);
					}
			});
			
			jq('#reasonForNonAdherence :input').prop('disabled', true);	
			
			if (getValue('temporaryReffered.value') == 1065) {
				jq('#temporaryRefferedReason :input').prop('disabled', false);
			}
			else {
				jq('#temporaryRefferedReason :input').prop('disabled', true);
				}
		
			jq("#temporaryReffered input:radio").change(function() {
				if (getValue('temporaryReffered.value') == 1065) {
					jq('#temporaryRefferedReason :input').prop('disabled', false);
				}
				else {
					jq('#temporaryRefferedReason :input').prop('disabled', true);
					}
			});
			
			if (getValue('admittedOption.value') == "1065") {
				jq('#admittedId :input').prop('disabled', false);
			}
			else {
				jq('#admittedId :input').prop('disabled', true);
			}
		
			jq("#admittedOption input:radio").change(function() {
				if (getValue('admittedOption.value') == "1065") {
					jq('#admittedId :input').prop('disabled', false);
				}
				else {
					jq('#admittedId :input').prop('disabled', true);
				}
			});
			jq("#appointmentafterDate").change(function() {
				var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
		    	var date = new Date();
		    	if (getValue('appointmentafterDate.value')=="1750")  {
			    	date.setDate(date.getDate() + 7);
			    }
		    	if (getValue('appointmentafterDate.value')=="1525")  {
			    	date.setDate(date.getDate() + 14);
			    }
		    	if (getValue('appointmentafterDate.value')=="1791")  {
			    	date.setDate(date.getDate() + 21);
			    }
		    	if (getValue('appointmentafterDate.value')=="1524")  {
			    	date.setDate(date.getDate() + 30);
			    }
		    	
				var someFormattedDate = date.getDate() + "-" + months[date.getMonth()] + "-" + date.getFullYear();
		    	if(someFormattedDate!="Invalid Date"){
			    	document.getElementById("w90-display").value =  date.getDate() + "-" + months[date.getMonth()] + "-" + date.getFullYear();
					document.getElementById("w90").value = date.getFullYear()  + "-" +  date.getMonth() 	+ "-" + date.getDate();
		    	}
		    	else{
		    		document.getElementById("w90-display").value =  "";
					document.getElementById("w90").value = "";
		    	}
		    	
			});
			
			jq("#w58,#w60,#w62,#w64,#w66,#w68,#w70,#w72,#w74,#w76").change(function() {
					if(document.getElementById(this.id).value==111177 ){
						alert("Please check ANTIBIOTICS is included in the regimen.");
					}
					
					if(document.getElementById(this.id).value==135842 || document.getElementById(this.id).value==113654 || document.getElementById(this.id).value==163547|| document.getElementById(this.id).value==136162){
						alert("Please check LINEZOLID is included in the regimen.");
					}
					
					if(document.getElementById(this.id).value==163517 ){
						alert("Please check Pto/Eto,Gfx is included in the regimen.");
					}
					if(document.getElementById(this.id).value==163518){
						alert("Please check Pto/Eto is included in the regimen.");
					}
					if(document.getElementById(this.id).value==117321 || document.getElementById(this.id).value==142412){
						alert("Please check Pto/Eto, PAS is included in the regimen.");
					}

					if(document.getElementById(this.id).value==121681){
						alert("Please check H, Eto/Pto is included in the regimen.");
					}
					
					
					if(document.getElementById(this.id).value==116986|| document.getElementById(this.id).value==163519 || document.getElementById(this.id).value==136443){
						alert("Please check Z, H, R, Pto/Eto, and PAS is included in the regimen.");
					}


					if(document.getElementById(this.id).value==133473){
						alert("Please check Eto/Pto, PAS, H, E, Z, AMX/CLV, Cfz is included in the regimen.");
					}

		
					if(document.getElementById(this.id).value==110834 ||document.getElementById(this.id).value==151){
						alert("Please check PAS, Eto, Pto, Cfz, FQs, H, E, and Z is included in the regimen.");
					}

					if(document.getElementById(this.id).value==134255){
						alert("Please check Eto/Pto, Clr, FQs is included in the regimen.");
					}

					if(document.getElementById(this.id).value==80){
						alert("Please check Z, Fluoroquinolones is included in the regimen.");
					}
					if(document.getElementById(this.id).value==163520){
						alert("Please check Fluoroquinolones  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==117762){
						alert("Please check Z  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==163521||document.getElementById(this.id).value==113338||document.getElementById(this.id).value==163522){
						alert("Please check S, Km, Am, Cm  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==117698){
						alert("Please check S, Km, Am, Cm, Clr  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==163548){
						alert("Please check S, Km, Am, Cm, Cs, FQs, H Eto, Lzd  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==118983){
						alert("Please check Cs, Lzd, H, S, Km, Cm, H, Fluoroquinolones, Pto/Eto, E  is included in the regimen.");
					}
					
					if(document.getElementById(this.id).value==162313 || document.getElementById(this.id).value==155190){
						alert("Please check Cs, H, FQs  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==119537 ){
						alert("Please check Cs, fluoroquinolones, H, Eto/Pto  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==125562)
					{
						alert("Please check Cs, H, Eto/Pto  is included in the regimen.");
					}
					if(document.getElementById(this.id).value==114736 ||document.getElementById(this.id).value==111164)
						{
						alert("Please check E, Eto/Pto, Lzd, Cfz, rifabutin, H, S  is included in the regimen.");
						}
					if(document.getElementById(this.id).value==128384)
						{
						alert("Please check FQs is included in the regimen.");
						}
					
			});
			


			beforeSubmit.push(function() {
		/*		if(getValue('daig_value.value') =="" &amp;&amp; getValue('daig_value1.value') =="" &amp;&amp; getValue('daig_value2.value')==""){
							getField('daig_value2.error').html('Please enter diagnosis').show();
							return false;		
				}
				
				if(getValue('nextStep.value') == ""){
					getField('nextStep.error').html('Required').show();
					return false;
				}
				
				if(getValue('missedDoseCount.value') == ""){
					getField('missedDoseCount.error').html('Required').show();
					return false;
				}
				
				if (getValue('artSideEffectPresent.value') == '1065') {
					if(getValue('artSideEffectValue.value')=="" &amp;&amp; getValue('artSideEffectValue1.value')==""  &amp;&amp; getValue('artSideEffectValue2.value')==""){
						getField('artSideEffectValue2.error').html('Please select ART side effects').show();
						return false;
					}
				}
	
				if(getValue('temporaryReffered.value') == '1065'){
					if(getValue('temporaryRefferedReason.value')==""){
						getField('temporaryRefferedReason.error').html('Please select reason for temporary referral').show();
						return false;
					}
				}
				

				if(getValue('nextStep.value') == "160523"){
					if(getValue('appointmentDate.value')=="" || getValue('appointmentDate.value')==null){
						getField('appointmentDate.error').html('Required').show();
						return false;
					}
				}
				else{
					if(getValue('admittedDate.value')=="" || getValue('admittedTo.value')=="" || getValue('admittedReason.value')==""){
						getField('admittedReason.error').html('All details required').show();
						return false;
					}
				}
			*/
				
			/*	var returnDate = new Date(getValue('returnVisitDate.value')).getTime();
				var encounterDate = new Date(getValue('encounter-date.value')).getTime();
				var encouterDateValue = new Date(getValue('encounter-date.value'));
				var fourMonthsFromEncounterDate = encouterDateValue.setDate(encouterDateValue.getDate() + 120);
				if ((returnDate &lt; encounterDate) || (returnDate &gt; fourMonthsFromEncounterDate)) {
					getField('returnVisitDate.error').html('Return Visit date should be after encounter date and NOT more than four months from Encounter Date').show();
					return false;
				}*/
				return true;
			});
			
			
			// show fields with data 
			fieldIndex = 8; 
			j=1;
			while(document.getElementById("w"+fieldIndex).value!="" &amp;&amp; j &lt; 11){
				jQuery('#'+j+'-toggleContainer').show();   
				fieldIndex=fieldIndex+2;
				j++;
			}
			
	
			$j('#1-removeEntry').remove();
			$j('#10-addEntry').remove();
			$j('#1-toggleContainer').show();
			
			
			$j('button.addEntry').on("click", function(){
				var correctedAddButtonId = parseFloat(this.id) + 1;      
				var contentAddId = "#" + correctedAddButtonId + "-toggleContainer";
				$j(contentAddId).toggle(true);      
				$j('#' + this.id).toggle(false); 
				$j('#' + parseFloat(this.id) + '-removeEntry').toggle(false);
				return false;});    
			 
			$j('button.removeEntry').on("click", function(){ 
				var correctedRemoveButtonId = parseFloat(this.id) - 1;
				var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer";
				$j(contentAddId).toggle(false);
				$j( ':input:not(:button)', contentAddId).val([]);
				$j('#' + correctedRemoveButtonId + '-addEntry').toggle(true);
				$j('#' + correctedRemoveButtonId + '-removeEntry').toggle(true);
				return false;
				});
			
			
			// show fields with data 
			fieldIndex1 = 36; 
			count=1;
			while(document.getElementById("w"+fieldIndex1).value!="" &amp;&amp; count &lt; 11){
				jQuery('#'+count+'-toggleContainer1').show();   
				fieldIndex1=fieldIndex1+2;
				count++;
			}
			
			$j('#1-removeEntry1').remove();
			$j('#10-addEntry1').remove();
			$j('#1-toggleContainer1').show();
			
			
			$j('button.addEntry1').on("click", function(){
				var correctedAddButtonId = parseFloat(this.id) + 1;      
				var contentAddId = "#" + correctedAddButtonId + "-toggleContainer1";
				$j(contentAddId).toggle(true);      
				$j('#' + this.id).toggle(false); 
				$j('#' + parseFloat(this.id) + '-removeEntry1').toggle(false);
				return false;});    
			 
			$j('button.removeEntry1').on("click", function(){ 
				var correctedRemoveButtonId = parseFloat(this.id) - 1;
				var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer1";
				$j(contentAddId).toggle(false);
				$j( ':input:not(:button)', contentAddId).val([]);
				$j('#' + correctedRemoveButtonId + '-addEntry1').toggle(true);
				$j('#' + correctedRemoveButtonId + '-removeEntry1').toggle(true);
				return false;
				});
			
			
			// show fields with data 
			fieldIndex2 = 54; 
			count2=1;
			while(document.getElementById("w"+fieldIndex2).value!="" &amp;&amp; count &lt; 11){
				jQuery('#'+count2+'-toggleContainer2').show();   
				fieldIndex1=fieldIndex1+2;
				count2++;
			}
			
			$j('#1-removeEntry2').remove();
			$j('#10-addEntry2').remove();
			$j('#1-toggleContainer2').show();
			
			
			$j('button.addEntry2').on("click", function(){
				var correctedAddButtonId = parseFloat(this.id) + 1;      
				var contentAddId = "#" + correctedAddButtonId + "-toggleContainer2";
				$j(contentAddId).toggle(true);      
				$j('#' + this.id).toggle(false); 
				$j('#' + parseFloat(this.id) + '-removeEntry2').toggle(false);
				return false;});    
			 
			$j('button.removeEntry2').on("click", function(){ 
				var correctedRemoveButtonId = parseFloat(this.id) - 1;
				var contentAddId = "#" + parseFloat(this.id) + "-toggleContainer2";
				$j(contentAddId).toggle(false);
				$j( ':input:not(:button)', contentAddId).val([]);
				$j('#' + correctedRemoveButtonId + '-addEntry2').toggle(true);
				$j('#' + correctedRemoveButtonId + '-removeEntry2').toggle(true);
				return false;
				});
			
		});
	
	</script>

<div class="ke-form-header" style="">
	<table width="100%" style="background-color: #c7d8a7">
		<tr>
			<td>Date: <encounterDate id="encounter-date" showTime="true" /></td>
			<td>Location: <encounterLocation
					default="GlobalProperty:kenyaemr.defaultLocation"
					type="autocomplete" /></td>
		</tr>
	</table>
</div>

<div class="ke-form-content">
	<fieldset>
		<table style="background-color: #ffffff;" width="80%" align="center">
			<tr>
				<td style="padding-left: 10px;" valign="top">1. Chief
					complaint:</td>
				<td>
					<table>
						<repeat> <template>
						<tr id="{n}-toggleContainer" style="display: none;">
							<td><obs conceptId="5219AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
									style="autocomplete" labelText=" " /></td>
							<td><button id="{n}-addEntry" class="addEntry">Add</button>
								<button id="{n}-removeEntry" class="removeEntry">Remove</button>
							</td>
						</tr>
						</template> <render n="1" concept=" " /> <render n="2" concept=" " /> <render
							n="3" concept=" " /> <render n="4" concept=" " /> <render n="5"
							concept=" " /> <render n="6" concept=" " /> <render n="7"
							concept=" " /> <render n="8" concept=" " /> <render n="9"
							concept=" " /> <render n="10" concept=" " /> </repeat>
					</table>
				</td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">2. History of
					present illness:</td>
				<td><obs conceptId="1390AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>

			<tr>
				<td style="padding-left: 10px;" valign="top">3. General
					examination:</td>
				<td><obs conceptId="1119AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>

			<tr>
				<td style="padding-left: 10px;" valign="top" bgcolor="#FAFAD2">4.
					Systematic Examination:</td>

			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">Heart:</td>
				<td><obs conceptId="151940AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">Lungs:</td>
				<td><obs conceptId="162669AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">Abdomen:</td>
				<td><obs conceptId="1808AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">Lymph Node:</td>
				<td><obs conceptId="c2534416-d179-4b5c-a4fc-0c353fa1f2f9"
						rows="2" cols="100" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">5. Neurological
					Examination:</td>
				<td><obs conceptId="157992AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>

			<tr>
				<td style="padding-left: 10px;" valign="top">6. Other Findings:
				</td>
				<td><obs conceptId="160160AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
						rows="2" cols="100" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">7. Diagnosis:</td>
				<td>
					<table>
						<obsgroup groupingConceptId="50ea66b0-77a0-42a8-84f5-c7164c9e3373">
						<repeat> <template>
						<tr id="{n}-toggleContainer1" style="display: none;">
							<td><obs conceptId="d8189970-d2a9-431d-864c-c8982d538dc9"
									style="autocomplete" type="autocomplete" labelText=" "
									id="daig_value" /></td>
							<td><button id="{n}-addEntry1" class="addEntry1">Add</button>
								<button id="{n}-removeEntry1" class="removeEntry1">Remove</button>
							</td>
						</tr>
						</template> <render n="1" concept=" " /> <render n="2" concept=" " /> <render
							n="3" concept=" " /> <render n="4" concept=" " /> <render n="5"
							concept=" " /> <render n="6" concept=" " /> <render n="7"
							concept=" " /> <render n="8" concept=" " /> <render n="9"
							concept=" " /> <render n="10" concept=" " /> </repeat> </obsgroup>
					</table>
				</td>
			</tr>
			<tr>
				<td style="padding-left: 10px;">8. Suffered from any drug side
					effect ?</td>
				<td><obs id="artSideEffectPresent"
						conceptId="159935AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" style="radio" /></td>
			</tr>
			<tr>
				<td style="padding-left: 10px;" valign="top">a. Side Effect's:
				</td>
				<td valign="top">
					<div id="artSideEffectList">
						<table>
							<repeat> <template>
							<tr id="{n}-toggleContainer2" style="display: none;">
								<td valign="top"><obs
										conceptId="59af83ba-4a34-416d-86f9-e91096818e0a"
										id="artSideEffectValue" /></td>
								<td valign="top"><button id="{n}-addEntry2"
										class="addEntry2">Add</button>
									<button id="{n}-removeEntry2" class="removeEntry2">Remove</button>
								</td>
							</tr>
							</template> <render n="1" concept=" " /> <render n="2" concept=" " /> <render
								n="3" concept=" " /> <render n="4" concept=" " /> <render n="5"
								concept=" " /> <render n="6" concept=" " /> <render n="7"
								concept=" " /> <render n="8" concept=" " /> <render n="9"
								concept=" " /> <render n="10" concept=" " /> </repeat>
						</table>
					</div>
				</td>
			</tr>
			<!--  <tr>
					<td style="padding-left:10px;">
					  8. ART Adherence
					</td>
					<td></td>
				</tr>
				<tr>	
					<td style="padding-left:28px;">Number of doses provided </td>
					<td><obs conceptId="1196AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" id="totalDoseCount" /></td>
				</tr>
				<tr>	
					<td style="padding-left:28px;">Number of doses missed </td>
					<td><obs conceptId="05a061ba-2d76-4929-9788-afe650eaae7b" id="missedDoseCount" /></td>
				</tr>
				
				<tr>	
					<td style="padding-left:28px;">% of adherence to ART</td>
					<td><obs id="calculated-adherence" class="value" conceptId="360716f8-c50b-4bb7-bce8-edbe4aa9445c"/>
					<br/> Reason for non-adherence : <obs id="reasonForNonAdherence" conceptId="160582AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
					</td>
				</tr>-->
			<!-- 			<tr>	
					<td style="padding-left:28px;">Taking doses at correct time in last 30 days?</td>
					<td><obs conceptId="8a70de3b-5975-4c16-b1e7-e9a7a63329e2" style="radio"/></td>
				</tr>
				<tr>	
					<td style="padding-left:28px;">Taking correct doses in last 30 days?</td>
					<td><obs conceptId="9f401f60-2ac3-4d6c-bf8a-33885b99492a" style="radio"/></td>
				</tr>
 -->

			<tr>
				<td style="padding-left: 10px;">9. Temporary Referral</td>
				<td><obs id="temporaryReffered"
						conceptId="5e05d243-e039-4f04-9988-18d5a499329e" style="radio" /></td>
			</tr>
			<tr>
				<td style="padding-left: 28px;">Temporary Referral Reason</td>
				<td><obs id="temporaryRefferedReason"
						conceptId="c648f69b-7065-4255-9af2-6076348c87dc" /></td>
			</tr>
			<!--  <tr>	
					<td style="padding-left:10px;">10. Admitted</td>
					<td><obs conceptId="c17ed847-31e8-4c6a-a3b6-e2d6493870ff" style="radio" id="admittedOption" /></td>
				</tr>
				<tr>
					<td></td>	
					<td>
						<div id="admittedId">
						<table>
							<tr>
								<td  style="padding: 5px">Admitted Date : <obs id="admittedDate" conceptId="b36da368-4705-4582-b213-74a7a990aff8" allowFutureDates="true"/> 
								Admitted To : <obs id="admittedTo" conceptId="a3e2e25b-a44c-4622-845e-24c6db5c496b" /></td>
							</tr>
								<td  style="padding: 5px">Reason for admission : <obs id="admittedReason" conceptId="ec8b9ede-fd85-4809-9bf2-e4550efd968c" /></td>
						</table>
						</div>
					</td>	
				</tr>-->
			<tr>
				<td style="padding-left: 10px;">10. Next Step</td>
				<td style="padding: 5px"><div>
						Next appointment date :
						<obs id="appointmentDate"
							conceptId="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
							allowFutureDates="true" />
					</div>
					<div>
						After :
						<obs id="appointmentafterDate"
							conceptId="161261AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
					</div></td>
			</tr>
		</table>

	</fieldset>

</div>

<div class="ke-form-footer">
	<submit />
</div>

</htmlform>